{"ast":null,"code":"import _regeneratorRuntime from \"/home/leventengin/vin_proje/react_side/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/leventengin/vin_proje/react_side/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/leventengin/vin_proje/react_side/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/leventengin/vin_proje/react_side/src/views/Pages/LoginPage.js\";\nimport React, { useState } from \"react\";\nimport axios from 'axios';\nimport { API_BASE_URL } from \"assets/jss/material-dashboard-pro-react\"; // @material-ui/core components\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Icon from \"@material-ui/core/Icon\"; // @material-ui/icons\n//import Face from \"@material-ui/icons/Face\";\n\nimport Email from \"@material-ui/icons/Email\"; // import LockOutline from \"@material-ui/icons/LockOutline\";\n// core components\n\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport CustomInput from \"components/CustomInput/CustomInput.js\";\nimport Button from \"components/CustomButtons/Button.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardFooter from \"components/Card/CardFooter.js\";\nimport { withRouter } from 'react-router-dom';\nimport styles from \"assets/jss/material-dashboard-pro-react/views/loginPageStyle.js\";\nvar useStyles = makeStyles(styles);\n\nfunction LoginPage(props) {\n  var _React$useState = React.useState(\"cardHidden\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      cardAnimaton = _React$useState2[0],\n      setCardAnimation = _React$useState2[1];\n\n  setTimeout(function () {\n    setCardAnimation(\"\");\n  }, 700);\n  var classes = useStyles();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorType = _useState8[0],\n      setErrorType = _useState8[1];\n\n  var handleSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var res, token, userName, firstName, lastName, picProfile, userId, email;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              console.log(username);\n              console.log(password);\n\n              if (!(username === \"\")) {\n                _context.next = 9;\n                break;\n              }\n\n              setError(true);\n              setErrorType(\"Kullanıcı adı boş\");\n              console.log(\"kullanıcı adı boş...\");\n              _context.next = 43;\n              break;\n\n            case 9:\n              if (!(password === \"\")) {\n                _context.next = 15;\n                break;\n              }\n\n              setError(true);\n              setErrorType(\"Parola boş\");\n              console.log(\"parola boş...\");\n              _context.next = 43;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.next = 18;\n              return axios.post(\"\".concat(API_BASE_URL, \"auth/login/\"), {\n                username_or_email: username,\n                password: password\n              });\n\n            case 18:\n              res = _context.sent;\n              console.log(res);\n              token = res.data.token;\n              userName = res.data.username;\n              firstName = res.data.first_name;\n              lastName = res.data.last_name;\n              picProfile = res.data.pic_profile;\n              userId = res.data.user_id;\n              email = res.data.email;\n              localStorage.setItem('token', token);\n              localStorage.setItem('userName', userName);\n              localStorage.setItem('firstName', firstName);\n              localStorage.setItem('lastName', lastName);\n              localStorage.setItem('pic_profile', picProfile);\n              localStorage.setItem('user_id', userId);\n              localStorage.setItem('email', email);\n              _context.next = 42;\n              break;\n\n            case 36:\n              _context.prev = 36;\n              _context.t0 = _context[\"catch\"](15);\n              console.log(_context.t0.response);\n              setError(true);\n              setErrorType(\"Bağlantı hatası\");\n              console.log(\"bağlantı hatası...\");\n\n            case 42:\n              if (localStorage.token) {\n                props.history.push('/dashboard');\n              }\n\n            case 43:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[15, 36]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    className: classes.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(GridContainer, {\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(GridItem, {\n    xs: 12,\n    sm: 6,\n    md: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(Card, {\n    login: true,\n    className: classes[cardAnimaton],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(CardHeader, {\n    className: \"\".concat(classes.cardHeader, \" \").concat(classes.textCenter),\n    color: \"rose\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    className: classes.cardTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Log in\"), React.createElement(\"div\", {\n    className: classes.socialLine,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, [\"fab fa-facebook-square\", \"fab fa-twitter\", \"fab fa-google-plus\"].map(function (prop, key) {\n    return React.createElement(Button, {\n      color: \"transparent\",\n      justIcon: true,\n      key: key,\n      className: classes.customButtonClass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: prop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }));\n  }))), React.createElement(CardBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(CustomInput, {\n    labelText: \"Eposta\",\n    id: \"email\",\n    value: username,\n    formControlProps: {\n      fullWidth: true\n    },\n    inputProps: {\n      endAdornment: React.createElement(InputAdornment, {\n        position: \"end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Email, {\n        className: classes.inputAdornmentIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })),\n      onChange: function onChange(e) {\n        return setUsername(e.target.value);\n      }\n    } //onChange = { (e) => setUsername(e.target.value)}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), React.createElement(CustomInput, {\n    labelText: \"Parola\",\n    id: \"password\",\n    formControlProps: {\n      fullWidth: true\n    },\n    inputProps: {\n      endAdornment: React.createElement(InputAdornment, {\n        position: \"end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        className: classes.inputAdornmentIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"lock_outline\")),\n      type: \"password\",\n      autoComplete: \"off\",\n      onChange: function onChange(e) {\n        return setPassword(e.target.value);\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  })), React.createElement(CardFooter, {\n    className: classes.justifyContentCenter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(Button, {\n    color: \"rose\",\n    simple: true,\n    size: \"lg\",\n    block: true,\n    onClick: function onClick(e) {\n      return handleSubmit(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"G\\u0130R\\u0130\\u015E\")), error && React.createElement(\"div\", {\n    style: {\n      color: \"red\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, errorType))))));\n}\n\nexport default withRouter(LoginPage);","map":{"version":3,"sources":["/home/leventengin/vin_proje/react_side/src/views/Pages/LoginPage.js"],"names":["React","useState","axios","API_BASE_URL","makeStyles","InputAdornment","Icon","Email","GridContainer","GridItem","CustomInput","Button","Card","CardBody","CardHeader","CardFooter","withRouter","styles","useStyles","LoginPage","props","cardAnimaton","setCardAnimation","setTimeout","classes","username","setUsername","password","setPassword","error","setError","errorType","setErrorType","handleSubmit","e","preventDefault","console","log","post","username_or_email","res","token","data","userName","firstName","first_name","lastName","last_name","picProfile","pic_profile","userId","user_id","email","localStorage","setItem","response","history","push","container","cardHeader","textCenter","cardTitle","socialLine","map","prop","key","customButtonClass","fullWidth","endAdornment","inputAdornmentIcon","onChange","target","value","type","autoComplete","justifyContentCenter","color"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,YAAR,QAA2B,yCAA3B,C,CAEA;;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,IAAP,MAAiB,wBAAjB,C,CAEA;AACA;;AACA,OAAOC,KAAP,MAAkB,0BAAlB,C,CACA;AAEA;;AACA,OAAOC,aAAP,MAA0B,kCAA1B;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,OAAOC,WAAP,MAAwB,uCAAxB;AACA,OAAOC,MAAP,MAAmB,oCAAnB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,MAAP,MAAmB,iEAAnB;AAEA,IAAMC,SAAS,GAAGd,UAAU,CAACa,MAAD,CAA5B;;AAEA,SAASE,SAAT,CAAmBC,KAAnB,EAA0B;AAAA,wBACiBpB,KAAK,CAACC,QAAN,CAAe,YAAf,CADjB;AAAA;AAAA,MACjBoB,YADiB;AAAA,MACHC,gBADG;;AAExBC,EAAAA,UAAU,CAAC,YAAW;AACpBD,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACD,GAFS,EAEP,GAFO,CAAV;AAGA,MAAME,OAAO,GAAGN,SAAS,EAAzB;;AALwB,kBAMQjB,QAAQ,CAAC,EAAD,CANhB;AAAA;AAAA,MAMjBwB,QANiB;AAAA,MAMPC,WANO;;AAAA,mBAOQzB,QAAQ,CAAC,EAAD,CAPhB;AAAA;AAAA,MAOjB0B,QAPiB;AAAA,MAOPC,WAPO;;AAAA,mBAQE3B,QAAQ,CAAC,KAAD,CARV;AAAA;AAAA,MAQjB4B,KARiB;AAAA,MAQVC,QARU;;AAAA,mBASU7B,QAAQ,CAAC,EAAD,CATlB;AAAA;AAAA,MASjB8B,SATiB;AAAA,MASNC,YATM;;AAaxB,MAAMC,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBA,cAAAA,CAAC,CAACC,cAAF;AACAC,cAAAA,OAAO,CAACC,GAAR,CAAYZ,QAAZ;AACAW,cAAAA,OAAO,CAACC,GAAR,CAAYV,QAAZ;;AAHmB,oBAIfF,QAAQ,KAAK,EAJE;AAAA;AAAA;AAAA;;AAKfK,cAAAA,QAAQ,CAAC,IAAD,CAAR;AACAE,cAAAA,YAAY,CAAC,mBAAD,CAAZ;AACAI,cAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AAPe;AAAA;;AAAA;AAAA,oBASVV,QAAQ,KAAK,EATH;AAAA;AAAA;AAAA;;AAUjBG,cAAAA,QAAQ,CAAC,IAAD,CAAR;AACAE,cAAAA,YAAY,CAAC,YAAD,CAAZ;AACAI,cAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AAZiB;AAAA;;AAAA;AAAA;AAAA;AAAA,qBAiBOnC,KAAK,CAACoC,IAAN,WAAcnC,YAAd,kBAAyC;AACvDoC,gBAAAA,iBAAiB,EAAEd,QADoC;AAEvDE,gBAAAA,QAAQ,EAAEA;AAF6C,eAAzC,CAjBP;;AAAA;AAiBLa,cAAAA,GAjBK;AAqBXJ,cAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACMC,cAAAA,KAtBK,GAsBGD,GAAG,CAACE,IAAJ,CAASD,KAtBZ;AAuBLE,cAAAA,QAvBK,GAuBMH,GAAG,CAACE,IAAJ,CAASjB,QAvBf;AAwBLmB,cAAAA,SAxBK,GAwBOJ,GAAG,CAACE,IAAJ,CAASG,UAxBhB;AAyBLC,cAAAA,QAzBK,GAyBMN,GAAG,CAACE,IAAJ,CAASK,SAzBf;AA0BLC,cAAAA,UA1BK,GA0BQR,GAAG,CAACE,IAAJ,CAASO,WA1BjB;AA2BLC,cAAAA,MA3BK,GA2BIV,GAAG,CAACE,IAAJ,CAASS,OA3Bb;AA4BLC,cAAAA,KA5BK,GA4BGZ,GAAG,CAACE,IAAJ,CAASU,KA5BZ;AA6BXC,cAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8Bb,KAA9B;AACAY,cAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCX,QAAjC;AACAU,cAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCV,SAAlC;AACAS,cAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCR,QAAjC;AACAO,cAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCN,UAApC;AACAK,cAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCJ,MAAhC;AACAG,cAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AAnCW;AAAA;;AAAA;AAAA;AAAA;AAsCXhB,cAAAA,OAAO,CAACC,GAAR,CAAY,YAAIkB,QAAhB;AACAzB,cAAAA,QAAQ,CAAC,IAAD,CAAR;AACAE,cAAAA,YAAY,CAAC,iBAAD,CAAZ;AACAI,cAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;;AAzCW;AA4Cb,kBAAIgB,YAAY,CAACZ,KAAjB,EAAuB;AACrBrB,gBAAAA,KAAK,CAACoC,OAAN,CAAcC,IAAd,CAAmB,YAAnB;AACD;;AA9CY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZxB,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAmDA,SACE;AAAK,IAAA,SAAS,EAAET,OAAO,CAACkC,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,aAAD;AAAe,IAAA,OAAO,EAAC,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAE,EAAd;AAAkB,IAAA,EAAE,EAAE,CAAtB;AAAyB,IAAA,EAAE,EAAE,CAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,MAAX;AAAY,IAAA,SAAS,EAAElC,OAAO,CAACH,YAAD,CAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,UAAD;AACE,IAAA,SAAS,YAAKG,OAAO,CAACmC,UAAb,cAA2BnC,OAAO,CAACoC,UAAnC,CADX;AAEE,IAAA,KAAK,EAAC,MAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AAAI,IAAA,SAAS,EAAEpC,OAAO,CAACqC,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,EAKE;AAAK,IAAA,SAAS,EAAErC,OAAO,CAACsC,UAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CACC,wBADD,EAEC,gBAFD,EAGC,oBAHD,EAICC,GAJD,CAIK,UAACC,IAAD,EAAOC,GAAP,EAAe;AACnB,WACE,oBAAC,MAAD;AACE,MAAA,KAAK,EAAC,aADR;AAEE,MAAA,QAAQ,MAFV;AAGE,MAAA,GAAG,EAAEA,GAHP;AAIE,MAAA,SAAS,EAAEzC,OAAO,CAAC0C,iBAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME;AAAG,MAAA,SAAS,EAAEF,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CADF;AAUD,GAfA,CADH,CALF,CADF,EAyBE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,oBAAC,WAAD;AACE,IAAA,SAAS,EAAC,QADZ;AAEE,IAAA,EAAE,EAAC,OAFL;AAGE,IAAA,KAAK,EAAEvC,QAHT;AAIE,IAAA,gBAAgB,EAAE;AAChB0C,MAAAA,SAAS,EAAE;AADK,KAJpB;AAOE,IAAA,UAAU,EAAE;AACVC,MAAAA,YAAY,EACV,oBAAC,cAAD;AAAgB,QAAA,QAAQ,EAAC,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAE5C,OAAO,CAAC6C,kBAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFQ;AAMZC,MAAAA,QAAQ,EAAE,kBAACpC,CAAD;AAAA,eAAOR,WAAW,CAACQ,CAAC,CAACqC,MAAF,CAASC,KAAV,CAAlB;AAAA;AANE,KAPd,CAeE;AAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAmBE,oBAAC,WAAD;AACE,IAAA,SAAS,EAAC,QADZ;AAEE,IAAA,EAAE,EAAC,UAFL;AAGE,IAAA,gBAAgB,EAAE;AAChBL,MAAAA,SAAS,EAAE;AADK,KAHpB;AAME,IAAA,UAAU,EAAE;AACVC,MAAAA,YAAY,EACV,oBAAC,cAAD;AAAgB,QAAA,QAAQ,EAAC,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAE5C,OAAO,CAAC6C,kBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CAFQ;AAQVI,MAAAA,IAAI,EAAE,UARI;AASVC,MAAAA,YAAY,EAAE,KATJ;AAUVJ,MAAAA,QAAQ,EAAE,kBAACpC,CAAD;AAAA,eAAON,WAAW,CAACM,CAAC,CAACqC,MAAF,CAASC,KAAV,CAAlB;AAAA;AAVA,KANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBF,CAzBF,EAgEE,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAEhD,OAAO,CAACmD,oBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAqB,IAAA,MAAM,MAA3B;AAA4B,IAAA,IAAI,EAAC,IAAjC;AAAsC,IAAA,KAAK,MAA3C;AAA6C,IAAA,OAAO,EAAE,iBAACzC,CAAD;AAAA,aAAMD,YAAY,CAACC,CAAD,CAAlB;AAAA,KAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,CAhEF,EAqEIL,KAAK,IAAI;AAAK,IAAA,KAAK,EAAE;AAAC+C,MAAAA,KAAK;AAAN,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4B7C,SAA5B,CArEb,CADF,CADF,CADF,CADF,CADF;AAiFD;;AAGD,eAAef,UAAU,CAACG,SAAD,CAAzB","sourcesContent":["import React, {useState} from \"react\";\nimport axios from 'axios';\nimport {API_BASE_URL} from \"assets/jss/material-dashboard-pro-react\";\n\n// @material-ui/core components\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Icon from \"@material-ui/core/Icon\";\n\n// @material-ui/icons\n//import Face from \"@material-ui/icons/Face\";\nimport Email from \"@material-ui/icons/Email\";\n// import LockOutline from \"@material-ui/icons/LockOutline\";\n\n// core components\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport CustomInput from \"components/CustomInput/CustomInput.js\";\nimport Button from \"components/CustomButtons/Button.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardFooter from \"components/Card/CardFooter.js\";\nimport { withRouter } from 'react-router-dom';\nimport styles from \"assets/jss/material-dashboard-pro-react/views/loginPageStyle.js\";\n\nconst useStyles = makeStyles(styles);\n\nfunction LoginPage(props) {\n  const [cardAnimaton, setCardAnimation] = React.useState(\"cardHidden\");\n  setTimeout(function() {\n    setCardAnimation(\"\");\n  }, 700);\n  const classes = useStyles();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(false);\n  const [errorType, setErrorType] = useState(\"\");\n\n\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log(username);\n    console.log(password);\n    if (username === \"\") {\n        setError(true);\n        setErrorType(\"Kullanıcı adı boş\");\n        console.log(\"kullanıcı adı boş...\");\n    }\n    else if (password === \"\") {\n      setError(true);\n      setErrorType(\"Parola boş\");\n      console.log(\"parola boş...\");\n    }\n    else {\n\n          try {\n            const res = await axios.post(`${API_BASE_URL}auth/login/`, {\n                username_or_email: username,\n                password: password\n            });\n            console.log(res);\n            const token = res.data.token;\n            const userName = res.data.username;\n            const firstName = res.data.first_name;\n            const lastName = res.data.last_name;\n            const picProfile = res.data.pic_profile;\n            const userId = res.data.user_id;\n            const email = res.data.email;\n            localStorage.setItem('token', token);\n            localStorage.setItem('userName', userName);\n            localStorage.setItem('firstName', firstName);\n            localStorage.setItem('lastName', lastName);\n            localStorage.setItem('pic_profile', picProfile);\n            localStorage.setItem('user_id', userId);\n            localStorage.setItem('email', email);\n\n          } catch (err) {\n            console.log(err.response);\n            setError(true);\n            setErrorType(\"Bağlantı hatası\");\n            console.log(\"bağlantı hatası...\");          \n          }\n\n          if (localStorage.token){\n            props.history.push('/dashboard');\n          }\n\n    }\n  }\n\n  return (\n    <div className={classes.container}>\n      <GridContainer justify=\"center\">\n        <GridItem xs={12} sm={6} md={4}>\n          <form>\n            <Card login className={classes[cardAnimaton]}>\n              <CardHeader\n                className={`${classes.cardHeader} ${classes.textCenter}`}\n                color=\"rose\"\n              >\n                <h4 className={classes.cardTitle}>Log in</h4>\n                <div className={classes.socialLine}>\n                  {[\n                    \"fab fa-facebook-square\",\n                    \"fab fa-twitter\",\n                    \"fab fa-google-plus\"\n                  ].map((prop, key) => {\n                    return (\n                      <Button\n                        color=\"transparent\"\n                        justIcon\n                        key={key}\n                        className={classes.customButtonClass}\n                      >\n                        <i className={prop} />\n                      </Button>\n                    );\n                  })}\n                </div>\n              </CardHeader>\n              <CardBody>\n              \n                <CustomInput\n                  labelText=\"Eposta\"\n                  id=\"email\"\n                  value={username}\n                  formControlProps={{\n                    fullWidth: true\n                  }}\n                  inputProps={{\n                    endAdornment: (\n                      <InputAdornment position=\"end\">\n                        <Email className={classes.inputAdornmentIcon} />\n                      </InputAdornment>\n                    ),\n                  onChange: (e) => setUsername(e.target.value)        \n                  }}\n                  //onChange = { (e) => setUsername(e.target.value)}\n                />\n                <CustomInput\n                  labelText=\"Parola\"\n                  id=\"password\"\n                  formControlProps={{\n                    fullWidth: true\n                  }}\n                  inputProps={{\n                    endAdornment: (\n                      <InputAdornment position=\"end\">\n                        <Icon className={classes.inputAdornmentIcon}>\n                          lock_outline\n                        </Icon>\n                      </InputAdornment>\n                    ),\n                    type: \"password\",\n                    autoComplete: \"off\",\n                    onChange: (e) => setPassword(e.target.value)\n                  }}\n                />\n              </CardBody>\n              <CardFooter className={classes.justifyContentCenter}>\n                <Button color=\"rose\" simple size=\"lg\" block  onClick={(e)=> handleSubmit(e)}>\n                  GİRİŞ\n                </Button>\n              </CardFooter>\n              { error && <div style={{color:`red`}}>{errorType}</div>      }\n            </Card>\n          </form>\n        </GridItem>\n      </GridContainer>\n    </div>\n  );\n}\n\n\nexport default withRouter(LoginPage);\n\n"]},"metadata":{},"sourceType":"module"}